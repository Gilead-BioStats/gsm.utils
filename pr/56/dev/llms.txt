# gsm.utils

Tools to make an `OpenRBQM` developer’s life easier including standard
GitHub actions, issue and pull request templates and utility functions.

## Installation

You can install the latest release of gsm.utils from
[GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("Gilead-BioStats/gsm.utils@*release⁠")
```

You can install the development version of gsm.utils from
[GitHub](https://github.com/) with:

``` r
# install.packages("pak")
pak::pak("Gilead-BioStats/gsm.utils")
```

## Package Setup Utilities

The package provides two main functions to streamline package
development:

### `init_gsm_package()`

Initializes a new extension package with standardized structure and
configuration:

``` r
init_gsm_package(
  strPackageDir = "path/to/new/package",
  lDescriptionFields = list(),
  bIncludeWorkflowDir = TRUE
)
```

- Creates package skeleton using
  [`usethis::create_package()`](https://usethis.r-lib.org/reference/create_package.html)
- Sets up pkgdown documentation with GitHub Pages
- Configures testthat for unit testing
- Copies GitHub Actions workflows and issue templates from
  `inst/gha_templates`

### `update_gsm_package()`

Updates an existing GSM package with the latest standardized templates:

``` r
update_gsm_package(strPackageDir = ".")
```

- Refreshes `.github/ISSUE_TEMPLATE/` with current issue templates (Bug,
  Feature, Technical Task, Documentation Task)
- Updates `.github/workflows/` with latest GitHub Actions workflow
  definitions

Use this function to keep your package’s CI/CD infrastructure
synchronized with the latest conventions.

## GitHub Actions Workflows

The `inst/gha_templates/workflows` directory contains standardized
GitHub Actions workflow templates for GSM packages:

- **`R-CMD-check.yaml`**: Runs comprehensive R package checks on PRs to
  `main` across multiple platforms (macOS, Windows, Ubuntu) and R
  versions to ensure package integrity before release.

- **`R-CMD-check-dev.yaml`**: Lightweight R package check for PRs to
  `dev` branch, running on Ubuntu with current and minimum supported R
  versions for faster CI feedback during development.

- **`pkgdown-with-examples.yaml`**: Builds and deploys pkgdown
  documentation sites with automatic example indexing via
  [`add_pkgdown_examples()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/add_pkgdown_examples.md).
  Creates PR preview sites at `/pr/{number}` and deploys production
  sites to gh-pages on push to `main` or `dev`.

- **`pkgdown-cleanup.yaml`**: Automatically removes pkgdown PR preview
  directories from the gh-pages branch when pull requests are closed to
  keep the repository clean.

- **`r_releaser.yaml`**: Reusable workflow for building and attaching R
  package source tarballs to GitHub releases, using the A2-ai/r-releaser
  action with configurable options for data compression and vignette
  building.

## Code of Conduct

Please note that the gsm.utils project is released with a [Contributor
Code of
Conduct](https://gilead-biostats.github.io/gsm.utils/CODE_OF_CONDUCT.html).
By contributing to this project, you agree to abide by its terms.

# Package index

## Package setup

- [`init_gsm_package()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/init_gsm_package.md)
  : Initialize gsm Extension package

- [`update_gsm_package()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/update_gsm_package.md)
  : Update GSM package with global issue templates and GH actions

- [`update_workflow_version()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/update_workflow_version.md)
  :

  Update version in GitHub Actions workflow `.yaml` files

- [`create_gha_manifest()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/create_gha_manifest.md)
  : Create GitHub Actions Manifest This function generates a JSON
  manifest file summarizing the GitHub Actions workflows

- [`infer_from_yaml()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/infer_from_yaml.md)
  : Infer value from YAML/MD file This helper function extracts a value
  from a YAML or Markdown file based on a specified type.

## GitHub tooling

- [`add_gsm_actions()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/add_gsm_actions.md)
  : Add GSM GitHub Actions to package
- [`add_gsm_issue_templates()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/add_gsm_issue_templates.md)
  : Add GSM issue templates to package
- [`add_contributor_guidelines()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/add_contributor_guidelines.md)
  : Add GSM Contributor Guidelines markdown to package
- [`add_pkgdown_examples()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/add_pkgdown_examples.md)
  : Generate Examples menu in pkgdown
- [`check_gha_version()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/check_gha_version.md)
  : Check GitHub Actions version in a package

## Example rendering

- [`render_examples()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/render_examples.md)
  : Render example R Markdown files
- [`render_rmd()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/render_rmd.md)
  : Custom Rmarkdown render function
- [`make_example()`](https://gilead-biostats.github.io/gsm.utils/dev/reference/make_example.md)
  : Create an example R Markdown template

